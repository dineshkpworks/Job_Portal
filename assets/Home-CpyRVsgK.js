import{u as H,r as n,j as e,J as O,E as P,a as R,b as V,s as _,c as M,d as T,e as D}from"./index-OiARom6Y.js";import{I as C}from"./Input-BcN7DnIW.js";import{J as U}from"./JobList-evnQBrFZ.js";import{A as z}from"./ApplyModal-Ca1enLht.js";import"./Badge-BLPvBnRV.js";function W(){const{jobs:t,loading:a,error:l,filters:o,updateFilters:i,loadJobs:c,savedIds:s,appliedIds:d,setSavedIds:x,setAppliedIds:h}=H();return{jobs:t,loading:a,error:l,filters:o,updateFilters:i,loadJobs:c,savedIds:s,appliedIds:d,setSavedIds:x,setAppliedIds:h}}function K(t,a){const[l,o]=n.useState(t);return n.useEffect(()=>{const i=setTimeout(()=>o(t),a);return()=>clearTimeout(i)},[t,a]),l}function Q({value:t,onChange:a,placeholder:l="Search jobs, companies..."}){return e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"search",value:t,onChange:o=>a(o.target.value),placeholder:l,className:"w-full pl-10 pr-4 py-3 rounded-lg border border-[#e5e7eb] dark:border-gray-600 bg-white dark:bg-gray-800 text-[#111827] dark:text-gray-100 text-sm focus:outline-none focus:ring-2 focus:ring-[#2563eb]/30 focus:border-[#2563eb] transition-shadow duration-200","aria-label":"Search jobs"})]})}function J({filters:t,onFilterChange:a}){const{location:l,type:o,experience:i,category:c}=t;return e.jsxs("aside",{className:"rounded-lg border border-[#e5e7eb] dark:border-gray-700 bg-white dark:bg-gray-800 p-4 space-y-3 shadow-sm",children:[e.jsx("h3",{className:"text-xs font-semibold text-[#6b7280] dark:text-gray-400 uppercase tracking-wide",children:"Filters"}),e.jsx(C,{label:"Location",placeholder:"Search by location (Remote, Chennai, Bangalore)",value:l,onChange:s=>a({location:s.target.value})}),e.jsx(C,{label:"Category",placeholder:"Role or category",value:c,onChange:s=>a({category:s.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#6b7280] dark:text-gray-300 mb-1",children:"Job type"}),e.jsxs("select",{value:o,onChange:s=>a({type:s.target.value}),className:"w-full rounded-lg border border-[#e5e7eb] dark:border-gray-600 bg-white dark:bg-gray-800 text-[#111827] dark:text-gray-100 text-sm px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#2563eb]/30 focus:border-[#2563eb] transition-shadow duration-200",children:[e.jsx("option",{value:"",children:"All types"}),O.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#6b7280] dark:text-gray-300 mb-1",children:"Experience"}),e.jsxs("select",{value:i,onChange:s=>a({experience:s.target.value}),className:"w-full rounded-lg border border-[#e5e7eb] dark:border-gray-600 bg-white dark:bg-gray-800 text-[#111827] dark:text-gray-100 text-sm px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#2563eb]/30 focus:border-[#2563eb] transition-shadow duration-200",children:[e.jsx("option",{value:"",children:"All levels"}),P.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}const X="/Job_Portal/assets/interview-hero-FhcQKOH2.jpg",Y=300;function se(){const t=R(),{user:a,isAuthenticated:l}=V(),{jobs:o,loading:i,error:c,filters:s,updateFilters:d,loadJobs:x,savedIds:h,appliedIds:m,setSavedIds:u}=W(),[y,E]=n.useState(s.search||""),[j,g]=n.useState(null),[b,v]=n.useState(!1),[p,L]=n.useState(!1),k=K(y,Y);n.useEffect(()=>{d({search:k})},[k,d]);const A=n.useCallback(r=>E(r),[]),w=n.useCallback(r=>d(r),[d]),I=n.useCallback(async r=>{if(!a?.uid){t("/login");return}try{await _(a.uid,r),u(f=>new Set(f).add(r))}catch{}},[a?.uid,t,u]),F=n.useCallback(async r=>{if(a?.uid)try{await M(a.uid,r),u(f=>{const S=new Set(f);return S.delete(r),S})}catch{}},[a?.uid,u]),B=n.useCallback(r=>{if(!l){t("/login");return}m.has(r.id)||g(r)},[l,t,m]),N=n.useCallback(async()=>{v(!0);try{await T(),D(),await x()}finally{v(!1)}},[x]);return e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 min-w-0 w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("section",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-[#e5e7eb] dark:border-gray-700 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-[#111827] dark:text-white mb-2 sm:mb-4",children:"Find your next opportunity"}),e.jsx("p",{className:"text-sm sm:text-base text-[#6b7280] dark:text-gray-400 mb-6 sm:mb-8",children:"Search remote jobs by keyword, location, and category."}),e.jsx("div",{className:"max-w-lg",children:e.jsx(Q,{value:y,onChange:A,placeholder:"Search jobs, companies..."})})]}),e.jsx("div",{className:"hidden lg:flex justify-end items-center",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-2 border border-gray-100",children:e.jsx("img",{src:X,alt:"Professional interview conversation",className:"w-full max-w-[420px] h-auto rounded-xl object-contain"})})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 lg:gap-8 pt-8 pb-12",children:[e.jsxs("div",{className:"lg:contents",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 lg:hidden flex-wrap",children:[e.jsxs("button",{type:"button",onClick:()=>L(r=>!r),className:"inline-flex items-center gap-2 rounded-lg border border-[#e5e7eb] dark:border-gray-600 bg-white dark:bg-gray-800 px-4 py-2.5 text-sm font-medium text-[#111827] dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","aria-expanded":p,children:[e.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),p?"Hide filters":"Filters"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-[#6b7280] dark:text-gray-400",children:"Listings"}),e.jsx("button",{type:"button",onClick:N,disabled:b,className:"text-sm text-[#2563eb] hover:underline disabled:opacity-50 transition-opacity duration-200",children:b?"Seeding…":"Load sample jobs"})]})]}),p&&e.jsx("div",{className:"mt-3 lg:hidden",children:e.jsx(J,{filters:s,onFilterChange:w})})]}),e.jsx("aside",{className:"hidden lg:block flex-shrink-0 w-64 lg:sticky lg:top-8 self-start",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(J,{filters:s,onFilterChange:w}),e.jsxs("div",{className:"mt-3 flex items-center justify-between flex-shrink-0",children:[e.jsx("span",{className:"text-sm text-[#6b7280] dark:text-gray-400",children:"Listings"}),e.jsx("button",{type:"button",onClick:N,disabled:b,className:"text-sm text-[#2563eb] hover:underline disabled:opacity-50 transition-opacity duration-200",children:b?"Seeding…":"Load sample jobs"})]})]})}),e.jsx("div",{className:"flex-1 min-w-0 pb-6",children:e.jsx(U,{jobs:o,loading:i,error:c,savedIds:h,appliedIds:m,isAuthenticated:l,onSave:I,onUnsave:F,onApplyClick:B})})]}),j&&e.jsx(z,{job:j,onClose:()=>g(null),onSuccess:()=>g(null)})]})}export{se as default};
