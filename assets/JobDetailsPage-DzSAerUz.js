import{j as e,g as j,B as N,h as w,a as A,b as C,u as J,r as c,s as L,c as S,i as B,L as y}from"./index-OiARom6Y.js";import{B as x}from"./Badge-BLPvBnRV.js";import{A as D}from"./ApplyModal-Ca1enLht.js";function P({job:t,isSaved:a,isApplied:r,onSave:n,onUnsave:m,onApplyClick:p,isAuthenticated:i}){if(!t)return null;const l=()=>{i&&(a?m?.(t.id):n?.(t.id))},h=Array.isArray(t.tags)?t.tags:[];return e.jsxs("div",{className:"rounded border border-[#e5e7eb] dark:border-gray-700 bg-white dark:bg-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-5 sm:p-6 border-b border-[#e5e7eb] dark:border-gray-700",children:[e.jsx("h1",{className:"text-lg font-semibold text-[#111827] dark:text-white mb-1",children:t.title}),e.jsxs("p",{className:"text-sm text-[#6b7280] dark:text-gray-400 mb-2",children:[t.company," · ",t.location]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-1.5",children:[e.jsx(x,{children:t.type}),e.jsx(x,{children:t.experience}),r&&e.jsx(x,{variant:"applied",children:"Applied"})]}),e.jsxs("p",{className:"text-xs text-[#6b7280] dark:text-gray-500",children:["Posted ",j(t.createdAt)," · ",t.salary??"Not disclosed"]})]}),e.jsxs("div",{className:"p-5 sm:p-6 space-y-5",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-semibold text-[#111827] dark:text-white mb-2",children:"Job Description"}),e.jsx("p",{className:"text-sm text-[#6b7280] dark:text-gray-400 whitespace-pre-wrap leading-relaxed",children:t.description||"No description provided."})]}),h.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-semibold text-[#111827] dark:text-white mb-2",children:"Requirements"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:h.map(d=>e.jsx(x,{variant:"tag",children:d},d))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-semibold text-[#111827] dark:text-white mb-2",children:"About Company"}),e.jsxs("p",{className:"text-sm text-[#6b7280] dark:text-gray-400",children:[t.company,t.location?` · ${t.location}`:""]})]})]}),e.jsxs("div",{className:"p-5 sm:p-6 border-t border-[#e5e7eb] dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex flex-wrap items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:l,className:"p-2 rounded border border-[#e5e7eb] dark:border-gray-600 text-[#6b7280] dark:text-gray-400 hover:text-red-600 hover:border-gray-300 dark:hover:border-gray-500",title:a?"Remove from saved":"Save job",children:e.jsx("svg",{className:`w-4 h-4 ${a?"fill-red-600 text-red-600":""}`,fill:a?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),!r&&i&&e.jsx(N,{variant:"primary",onClick:()=>p?.(t),children:"Apply"})]})]})}function I(){const{id:t}=w(),a=A(),{user:r,isAuthenticated:n}=C(),{allJobs:m,savedIds:p,appliedIds:i,setSavedIds:l,setAppliedIds:h}=J(),[d,u]=c.useState(null),o=m.find(s=>s.id===t),f=c.useCallback(async s=>{if(!r?.uid){a("/login");return}try{await L(r.uid,s),l(b=>new Set(b).add(s))}catch{}},[r?.uid,a,l]),v=c.useCallback(async s=>{if(r?.uid)try{await S(r.uid,s),l(b=>{const g=new Set(b);return g.delete(s),g})}catch{}},[r?.uid,l]),k=c.useCallback(s=>{if(!n){a("/login");return}i.has(s.id)||u(s)},[n,a,i]);return o===void 0?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 flex flex-col items-center justify-center min-h-[50vh]",children:[e.jsx(B,{size:"lg"}),e.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Loading job..."})]}):o?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(y,{to:"/",className:"inline-flex items-center text-sm text-[#6b7280] dark:text-gray-400 hover:text-[#2563eb] mb-4",children:"← Back to jobs"}),e.jsx(P,{job:o,isSaved:p.has(o.id),isApplied:i.has(o.id),onSave:f,onUnsave:v,onApplyClick:k,isAuthenticated:n}),d&&e.jsx(D,{job:d,onClose:()=>u(null),onSuccess:()=>u(null)})]}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 text-center",children:[e.jsx("h1",{className:"text-lg font-semibold text-[#111827] dark:text-white mb-2",children:"Job not found"}),e.jsx(y,{to:"/",className:"text-sm text-[#2563eb] hover:underline",children:"Back to jobs"})]})}export{I as default};
